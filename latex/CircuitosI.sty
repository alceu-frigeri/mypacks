%%
%% \QA : Circuitos I
%%         \QAA : 1a Área
%%         \QAB : 2a Área
%%         \QAC : outros exercícios
%%
%% \QB : Eletronica I
%%         \QBA : 1a Área
%%         \QBB : 2a Área
%%
\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{CircuitosI}%
        [2016/10/15 MyCirc  drawing package version 0.1]


\defQuestion{C.I:1a:Q5}{%
  \draw (0,0) \ncoord(ref) to[I,l=\Ia] ++(0,4) \ncoord(A) to[R=\Ra] ++(2,0) \ncoord(B)
  (B) to[V,l=\Va] ++(0,-2) \ncoord(C) node(nC){}
  (B) -- ++(2,0) \ncoord(Bb) to[R=\Rb] ++(0,-2) \ncoord(Cc) -- (C) 
  (Bb) to[R=\Rc] ++(2,0) \ncoord(D) node(nD){} to[R=\Rd] (nD |- nC) \ncoord(E) to[V,l=\Vb] (Cc)
  (D) -- ++(2,0) \ncoord(Dd) node(nDd){} to[V,invert,l=\Vc]  (nDd |- nC) \ncoord(F) node(nF){} -- (E) 
  (Dd) to[R=\Rf] ++(2,0) to[I,l=\Ib] ++(0,-4) \ncoord(G) node(nG){} -| (F)
  (nG -| nF) to[I,l=\Ic] ++(-2,0) to[V,l=\Vd] ++(-2,0) to[R,l_=\Rg] ++(-2,0) \ncoord(H) -- (C)
  (H) -- (ref) -- ++(0,-2) to[R=\Rh] ++(2,0) \ncoord(I) 
  (I) -- ++(0,1) to[R,l_=\Ri] ++(2,0) -- ++(0,-1)
  (I) -- ++(0,-1) to[R=\Rj] ++(2,0) -- ++(0,1) -| (G)
  ;
}

\defQuestion{C.I:1a:Q6}{
  \draw (0,0) \ncoord(ref) node(nref){} to[R,l_=\Ra] ++(3,0) \ncoord(A) to[R,l_=\Rb] ++(3,0) \ncoord(B) node(nB){}
  (A) to[R=\Rc] ++(0,-2) \ncoord(C) node(nC){} -- (nC -| nref)
  (C) -- (nC -| nB)
  (ref) node[Quad,half base width=3.2cm,base height=1cm,anchor=inner 1+](q1){Q1}
  (nC -| nref) ++(0,-2) node[Quad H,anchor=inner 1+,half base width=3.2cm,base height=1cm](q2){Q2}
  (q1.1-) -- (q2.1+) (q1.2-) -- (q2.2+)
  (q1.1+) -- ++(-1,0) \ncoord(D) node(nD){} to[R=\Rd] (nD |- q2.1-)
  (D) -- ++(-1.5,0) \ncoord(E) node(nE){} to[R=\Re] ++(0,-2) to[V,l=\Va] (nE |- q2.1-)
  (E) -- ++(-1.5,0) \ncoord(F) node(nF){} to[I,l=\Ia,invert] (nF |- q2.1-) -- (q2.1-)
  (q1.2+) -- ++(1,0) \ncoord(G) node(nG){} to[R=\Rf] ++(0,-2)  to[R=\Rf] (nG |- q2.2-)
  (G) -- ++(1.5,0) \ncoord(H) node(nH){} to[I,l=\Ib] ++(0,-3) \ncoord(G1) to[R=\Rg] (nH |- q2.2-)
  (H) -- ++(1.5,0) \ncoord(I) node(nI){} to[R=\Rh] ++(0,-3) \ncoord(H1) to[I,l=\Ib] (nI |- q2.2-) -- (q2.2-)
  (G1) -- (H1)
  %node[Quad H,anchor=inner 1+,anchor=1+,I1=\Iaa,I2=\Iba](Qh){}
  ;
}

\defQuestion{C.I:1a:Q7}{
  \draw (0,0)  \ncoord(ref) to[V,l=\Va] ++(0,2)  to[R=\Ra]  ++(2,0) \ncoord(A) to[R=\Rb] ++(0,-2)
  (A) to[V,l=\Va] ++(2,0) \ncoord(B) to[R=\Rc] ++(0,-2) 
  (B) to[R=\Rd] ++(2,0) node[BB,anchor=1+,draw](bb){bb}
  (bb.1-) -- (ref)
  (bb.inner 1-) ++(0.5,0.25) -- ++(3,0) to[short,i=$I_1$] ++(1,0)
  (bb.inner 1-) ++(1,-0.25) -- ++(0,1.75) to[short,i=$V_1$] ++(0,1)
  (bb.inner 1-) ++(0.5,-0.25) ++(0,1.5) \ncoord(Vth) node(Vth){20} 
  (bb.inner 1-) ++(0.5,0) ++(3,0) \ncoord(In) node(In){10} 
  (Vth) -- (In)
  ;
}

\defQuestion{C.I:1a:Q1}{%
	\draw (0,0)  	\ncoord(ref) to[V,invert,l=\Vi] ++(0,2) \ncoord(A) to[R=\Rb]
	++(2,0) \ncoord(X) 
	(X) to[R=\Rx,v=\Vx] ++(0,2) \ncoord(OPminus)
	(OPminus) to[R,l_=\Ra] ++(-2,0) \ncoord(B)
	(OPminus) ++(3,-1) \ncoord(out)
	(ref) to[open] ++(-2,0) node(nG){} \ncoord(G) to[V,invert,l=\Vb] ++(0,2) |- (B) 
	(out) to[R=\Rd] ++(2,0) \ncoord(C) -- ++(0.5,0) node(nD){} \ncoord(D) node[ocirc] {}
	(out) to[V,invert,l_=\Kx.\Vx] ++(0,-2) |- (ref)
	(OPminus) -- ++(0,1) to[R=\Rc] ++(2,0) \ncoord(E) -- ++(0,+1) -- ++(-2,0) to[R,l_=\Re] ++(-2,0) -- (B)  
	(E) to[R=\Rf] ++(2,0) -| (C)
	(D) to[open,v=$V_o$]   (nD |- nG) node[ocirc] {}  -- (G)
	;	
}
\defQuestionAlias{QAAa}{C.I:1a:Q1}



\defQuestion{C.I:1a:Q1a}{%
	\draw (0,0)  	\ncoord(ref) to[V,invert,l=\Vi] ++(0,2) \ncoord(A) to[R=\Rb]
	++(2,0) \ncoord(X) node[op amp,anchor=+](opamp) {}
	(X) to[R,l_=\Rb] ++(0,-2) |- (ref)
	(opamp.-) to[R,l_=\Ra] ++(-2,0) \ncoord(B)
	(ref) to[open] ++(-2,0) node(nG){} \ncoord(G) to[V,invert,l=\Vb] ++(0,2) |- (B) 
	(opamp.out) to[R=\Rd] ++(2,0) \ncoord(C) -- ++(0.5,0) node(nD){} \ncoord(D) node[ocirc] {}
	(opamp.out) to[R=\Rd] ++(0,-2) |- (ref)
	(opamp.-) -- ++(0,1) to[R=\Rc] ++(2,0) \ncoord(E) -- ++(0,+1) -- ++(-2,0) to[R,l_=\Re] ++(-2,0) -- (B)  
	(E) to[R=\Rf] ++(2,0) -| (C)
	(D) to[open,v=$V_o$]   (nD |- nG) node[ocirc] {}  -- (G)
	;	
}
\defQuestionAlias{QAAaa}{C.I:1a:Q1a}

\defQuestion{C.I:1a:Q1b}{%
	\draw (0,0)  	\ncoord(ref) to[V,invert,l=\Vi] ++(0,2) \ncoord(A) to[R=\Rb]
	++(2,0) \ncoord(B) node[op amp,anchor=+](opamp) {}
	(opamp.-) to[R,l_=\Ra] ++(-2,0) \ncoord(B)
	(ref) to[open] ++(-2,0) node(nG){} \ncoord(G) to[V,invert,l=\Vb] ++(0,2) |- (B) 
	(opamp.out) to[R=\Rd] ++(2,0) \ncoord(C) -- ++(0.5,0) node(nD){} \ncoord(D) node[ocirc] {}
	(opamp.-) -- ++(0,1) to[R=\Rc] ++(2,0) \ncoord(E) -- ++(0,+1) -- ++(-2,0) to[R,l_=\Re] ++(-2,0) -- (B)
	(E) to[R=\Rf] ++(2,0) -| (C)
	(D) to[open,v=$V_o$]   (nD |- nG) node[ocirc] {}  -- (G)
	;	
}
\defQuestionAlias{QAAab}{C.I:1a:Q1b}

\defQuestion{C.I:1a:Q2}{%
	\draw (0,0) \ncoord(ref)  ++(0,3)  \ncoord(A)
	-- ++(2,0)  \ncoord(C) 
	(ref) -- ++(2,0) to[V,invert,l_=\Kx$V_x$]  ++(2,0) \ncoord(E) to[R=\Rg] ++(2,0)
	\ncoord(F) -- ++(0,2) to[I,invert,l=\Ky$I_y$] ++(-2,0) -- ++(-2,0) to[R=\Rh,v>=$V_o$]
	++(0,-2) \ncoord(D) -- (ref)
	 
	(F) -- ++(0,-2) \ncoord(Z) to[R=\Rf] ++(-2,0) -- ++(-2,0) \ncoord(Y) |- (ref)
	(F)  |- (C) -- (C)
	(ref) to[V,invert,l=\Vi] ++(0,-2) \ncoord(X) to[R=\Ra,i=$I_y$] ++(-2,0) \ncoord(G)  -- ++(0,2) \ncoord(I)
 	to[R=\Rb,v>=$V_x$] ++(2,0) -- (ref)
	(I)  to[R=\Rc] ++(-2,0) \ncoord(H) |- (A) 
	(G) -- ++(-3.5,0) to[R=\Rc] ++(0,2) \ncoord(J) to[I,invert,invert,l=\Ky$I_y$] ++(0,2)  |- (A) 
	(J) -- (H)
	(X) to[R=\Ri] (Y)
	
	(Z) -- ++(2,0) to[I,invert,l=\Ii] ++(0,2) to[R=\Ri] ++(0,3) -- ++(-2,0)
	
	 ;	
}
\defQuestionAlias{QAAb}{C.I:1a:Q2}

\defQuestion{C.I:1a:Q2a}{%
	\draw (0,0) \ncoord(ref) to[R=\Rd] ++(0,2) -- ++(0,1) \ncoord(A)
	to[R=\Re] ++(2,0)  \ncoord(C) 
	(ref) -- ++(2,0) to[V,invert,l_=\Kx$V_x$]  ++(2,0) \ncoord(E) to[R=\Rg] ++(2,0)
	\ncoord(F) -- ++(0,2) to[I,invert,l=\Ky$I_y$] ++(-2,0) -- ++(-2,0) to[R=\Rh,v>=$V_o$]
	++(0,-2) \ncoord(D) -- (ref)
	 
	(F) -- ++(0,-2) \ncoord(Z) to[R=\Rf] ++(-2,0) -- ++(-2,0) \ncoord(Y) |- (ref)
	(F)  |- (C) -- (C)
	(ref) to[V,invert,l=\Vi] ++(0,-2) \ncoord(X) to[R=\Ra,i=$I_y$] ++(-2,0) \ncoord(G)
 	to[R=\Rb,v>=$V_x$] ++(0,2) -- (ref)
	(G) -- ++(-1.5,0) \ncoord(I) to[R=\Rc] ++(0,2) \ncoord(H) |- (A) 
	(I) -- ++(-1.5,0) to[R=\Rc] ++(0,2) \ncoord(J) to[I,invert,l=\Ky$I_y$] ++(0,2)  |- (A) 
	(J) -- (H)
	(X) to[R=\Ri] (Y)
	
	(Z) -- ++(2,0) to[I,invert,l=\Ii] ++(0,2) to[R=\Ri] ++(0,3) -- ++(-2,0)
	
	 ;	
}
\defQuestionAlias{QAAba}{C.I:1a:Q2a}


\defQuestion{C.I:1a:Q2b}{%
	\draw (0,0) \ncoord(ref) to[R=\Rd] ++(0,2) -- ++(0,1) \ncoord(A)
	to[R=\Re] ++(2,0)  \ncoord(C) 
	(ref) -- ++(2,0) to[V,invert,l_=\Kx$V_x$]  ++(2,0) \ncoord(E) to[R=\Rg] ++(2,0)
	\ncoord(F) -- ++(0,2) to[I,invert,l=\Ky$I_y$] ++(-2,0) -- ++(-2,0) to[R=\Rh,v>=$V_o$]
	++(0,-2) \ncoord(D) -- (ref)
	 
	(F) -- ++(0,-2) \ncoord(Z) to[R=\Rf] ++(-2,0) -- ++(-2,0) \ncoord(Y) |- (ref)
	(F)  |- (C) -- (C)
	(ref) to[V,invert,l=\Vi] ++(0,-2) \ncoord(X) to[R=\Ra,i=$I_y$] ++(-2,0) \ncoord(G)
 	to[R=\Rb,v>=$V_x$] ++(0,2) -- (ref)
	(G) -- ++(-1.5,0) to[R=\Rc] ++(0,2) |- (A) -- (A)
	(X) to[R=\Ri] (Y)
	
	(Z) -- ++(2,0) to[I,invert,l=\Ii] ++(0,2) to[R=\Ri] ++(0,3) -- ++(-2,0)
	
	 ;	
}
\defQuestionAlias{QAAbb}{C.I:1a:Q2b}

\defQuestion{C.I:1a:Q2d}{%
	\draw (0,0) \ncoord(ref)  ++(0,3)  \ncoord(A)
	-- ++(2,0)  \ncoord(C) 
	(ref) -- ++(2,0) to[V,invert,l_=\Kx$V_x$]  ++(2,0) \ncoord(E) to[R=\Rg] ++(2,0)
	\ncoord(F) -- ++(0,2) to[I,invert,l=\Ky$I_y$] ++(-2,0) -- ++(-2,0) to[R=\Rh,v>=$V_o$]
	++(0,-2) \ncoord(D) -- (ref)
	 
	(F) -- ++(0,-2) \ncoord(Z) to[R=\Rf] ++(-2,0) -- ++(-2,0) \ncoord(Y) |- (ref)
	(F)  |- (C) -- (C)
	(ref) to[V,invert,l=\Vi] ++(0,-2) \ncoord(X) to[R=\Ra,i=$I_y$] ++(-2,0) \ncoord(G)  -- ++(0,2) \ncoord(I)
 	to[R=\Rb,v>=$V_x$] ++(2,0) -- (ref)
	(I)  to[R=\Rc] ++(-2,0) \ncoord(H) %|- (A) 
	(G) -- ++(-3.5,0) to[R=\Rc] ++(0,2) \ncoord(J) -- ++(0,2)  |- (A) 
	(J) -- (H)
	(J) ++(0,2) to[I,invert,l=\Ky$I_y$] ++(2,0) \ncoord(W) -| (I)
	(X) to[R=\Ri] (Y)
	
	(Z) -- ++(2,0) to[I,invert,l=\Ii] ++(0,2) to[R=\Ri] ++(0,3) \ncoord(WW) -- ++(-2,0)
	(W) ++(1.5,0) to[I,invert,l=\Ky$I_y$] ++(2,0) -- ++(1,0)|- (WW)
	 ;	
}
\defQuestionAlias{QAAbd}{C.I:1a:Q2d}




\defQuestion{C.I:1a:Q3}{%
	\draw (0,0) \ncoord(ref) to[R=\Rm] ++(0,2) to[R=\Rl] ++(0,2)
	\ncoord(A) -- ++(-0.5,0) to[I,invert,l=\Ky$V_x$] ++(-2,0) \ncoord(O) -- (O |- ref) to[short] (ref)
	(ref) -- ++(2,0) to[V,invert,l=\Va] ++(0,2) \ncoord(B) to[R=\Rk] ++(0,2)
	(B) -- ++(1,0) \ncoord(C) |- (A) 
	(C) to[R=\Rj,i=$I_y$] ++(2,0) \ncoord(D) to[R=\Ri] ++(0,-2)
	(D) ++(2,0) \ncoord(E) to[V,invert,l_=\Vc] (D)
	(E) to[R,l_=\Rg] ++(0,2) \ncoord(F) -- ++(-2,0) -- (A)
	(E) to[R=\Rh,i=$I_z$] ++(0,-2) \ncoord(G) -- (ref)
	(G) to[I,invert,l=\Ky$V_o$] ++(0,-2) \ncoord(H) to[R=\Rf] ++(-2,0)
	\ncoord(I) ++(0,2) to[V,invert,l=\Vd] (I) ++(0,-2) \ncoord(J) to[I,invert,l_=\Ia] (I)
	(J) -- ++(-1.5,0) \ncoord(K) to[R,l_=\Rd] ++(0,2) to[R,l_=\Re] ++(0,2)
	(K) to[R=\Rc] ++(-2,0) \ncoord(L) to[R,l_=\Rb,v^>=$V_o$] ++(0,2) ++(0,2)
	to[V,invert,l=\Kx$I_z$] ++(0,-2)
	(L) -- ++(-2.0,0) to[R,l_=\Ra,v^>=$V_x$] ++(-2,0)  \ncoord(P) -- (P |- ref) 
	(F) -- ++(1.5,0) \ncoord(M) |- (J) -- (J)
	(E) -| (M)
	(H) -| (M)
	
	(O) to [R,l_=\Rd] ++(-2,0) \ncoord(Q) to [R,l_=\Rd] ++(0,-2) -- (Q |- ref) to [R,l_=\Rd] ++(2,0)
	(P) to [R,l_=\Rd] ++(-2,0)to [R,l_=\Rd] ++(0,2) -- (Q |- ref)
	
	(M) to[R,l=\Rx] ++(2,0) -- ++(0,-4) \ncoord(X) to[I,invert,l=\Ia] ++(-2,0)
	(X) -- ++(0,-4) to[R,l=\Ry] ++(-2,0)
	;	
}
\defQuestionAlias{QAAc}{C.I:1a:Q3}



\defQuestion{C.I:1a:Q3a}{%
	\draw (0,0) \ncoord(ref) to[R=\Rm] ++(0,2) to[R=\Rl] ++(0,2)
	\ncoord(A) -- ++(-0.5,0) to[I,invert,l=\Ky$V_x$] ++(-2,0) \ncoord(O) -- (O |- ref) to[short] (ref)
	(ref) -- ++(2,0) to[V,invert,l=\Va] ++(0,2) \ncoord(B) to[R=\Rk] ++(0,2)
	(B) -- ++(1,0) \ncoord(C) |- (A) 
	(C) to[R=\Rj,i=$I_y$] ++(2,0) \ncoord(D) to[R=\Ri] ++(0,-2)
	(D) ++(2,0) \ncoord(E) to[V,invert,l_=\Vc] (D)
	(E) to[R,l_=\Rg] ++(0,2) \ncoord(F) to[V,invert,l=\Vb] ++(-2,0) -- (A)
	(E) to[R=\Rh,i=$I_z$] ++(0,-2) \ncoord(G) -- (ref)
	(G) to[I,invert,l=\Ky$V_o$] ++(0,-2) \ncoord(H) to[R=\Rf] ++(-2,0)
	\ncoord(I) ++(0,2) to[V,invert,l=\Vd] (I) ++(0,-2) \ncoord(J) to[I,invert,l_=\Ia] (I)
	(J) -- ++(-1.5,0) \ncoord(K) to[R,l_=\Rd] ++(0,2) to[R,l_=\Re] ++(0,2)
	(K) to[R=\Rc] ++(-2,0) \ncoord(L) to[R,l_=\Rb,v^>=$V_o$] ++(0,2) ++(0,2)
	to[V,invert,l=\Kx$I_z$] ++(0,-2)
	(L) -- ++(-2.0,0) to[R,l_=\Ra,v^>=$V_x$] ++(-2,0)  \ncoord(P) -- (P |- ref) 
	(F) -- ++(1.5,0) \ncoord(M) |- (J) -- (J)
	(E) -| (M)
	(H) -| (M)
	
	(O) to [R,l_=\Rd] ++(-2,0) \ncoord(Q) to [R,l_=\Rd] ++(0,-2) -- (Q |- ref) to [R,l_=\Rd] ++(2,0)
	(P) to [R,l_=\Rd] ++(-2,0)to [R,l_=\Rd] ++(0,2) -- (Q |- ref)
	
	;	
}
\defQuestionAlias{QAAca}{C.I:1a:Q3a}



\defQuestion{C.I:1a:Q3b}{%
	\draw (0,0) \ncoord(ref) to[R=\Rm] ++(0,2) to[R=\Rl] ++(0,2)
	\ncoord(A)
	(ref) -- ++(2,0) to[V,invert,l=\Va] ++(0,2) \ncoord(B) to[R=\Rk] ++(0,2)
	(B) -- ++(1,0) \ncoord(C) |- (A) 
	(C) to[R=\Rj,i=$I_y$] ++(2,0) \ncoord(D) to[R=\Ri] ++(0,-2)
	(D) ++(2,0) \ncoord(E) to[V,invert,l_=\Vc] (D)
	(E) to[R,l_=\Rg] ++(0,2) \ncoord(F) to[V,invert,l=\Vb] ++(-2,0) -- (A)
	(E) to[R=\Rh,i=$I_z$] ++(0,-2) \ncoord(G) -- (ref)
	(G) to[I,invert,l=\Ky$V_o$] ++(0,-2) \ncoord(H) to[R=\Rf] ++(-2,0)
	\ncoord(I) ++(0,2) to[V,invert,l=\Vd] (I) ++(0,-2) \ncoord(J) to[I,invert,l_=\Ia] (I)
	(J) -- ++(-1.5,0) \ncoord(K) to[R,l_=\Rd] ++(0,2) to[R,l_=\Re] ++(0,2)
	(K) to[R=\Rc] ++(-2,0) \ncoord(L) to[R,l_=\Rb,v^>=$V_o$] ++(0,2) ++(0,2)
	to[V,invert,l=\Kx$I_z$] ++(0,-2)
	(L) -- ++(-1.5,0) to[R,l_=\Ra,v^>=$V_x$] ++(0,2) |- (ref)
	(F) -- ++(1.5,0) \ncoord(M) |- (J) -- (J)
	(E) -| (M)
	(H) -| (M)
	
	;	
}
\defQuestionAlias{QAAcb}{C.I:1a:Q3b}


\defQuestion{C.I:1a:Q3c}{%
	\draw (0,0) \ncoord(ref) to[R=\Rm] ++(0,2) to[R=\Rl] ++(0,2)
	\ncoord(A)
	(ref) -- ++(2,0) to[V,invert,l=\Va] ++(0,2) \ncoord(B) to[R=\Rk] ++(0,2)
	(B) -- ++(1,0) \ncoord(C) |- (A) 
	(C) to[R=\Rj,i=$I_y$] ++(2,0) \ncoord(D) to[R=\Ri] ++(0,-2)
	(D) ++(2,0) \ncoord(E) to[V,invert,l_=\Vc] (D)
	(E) to[R,l_=\Rg] ++(0,2) \ncoord(F) to[V,invert,l=\Vb] ++(-2,0) -- (A)
	(E) to[R=\Rh] ++(0,-2) \ncoord(G) -- (ref)
	(G) to[I,invert,l=\Ky$V_o$] ++(0,-2) \ncoord(H) to[R=\Rf] ++(-2,0)
	\ncoord(I) ++(0,2) to[V,invert,l=\Vd] (I) ++(0,-2) \ncoord(J) to[I,invert,l_=\Ia] (I)
	(J) -- ++(-1.5,0) \ncoord(K) to[R,l_=\Rd] ++(0,2) to[R,l_=\Re] ++(0,2)
	(K) to[R=\Rc] ++(-2,0) \ncoord(L) to[R,l_=\Rb] ++(0,2) ++(0,2)
	to[V,invert,l=\Kx$I_y$] ++(0,-2)
	(L) -- ++(-1.5,0) to[R,l_=\Ra,v^>=$V_o$] ++(0,2) |- (ref)
	(F) -- ++(1.5,0) \ncoord(M) |- (J) -- (J)
	(E) -| (M)
	(H) -| (M)
	
	;	
}
\defQuestionAlias{QAAcc}{C.I:1a:Q3c}



\defQuestion{C.I:1a:Q4}{%
	\draw (0,0) \ncoord(ref) to[V,invert,l=\Vi] ++(0,2) \ncoord(A) to[R=\Rb]
	++(2,0) \ncoord(B) -- ++(0,-2) \ncoord(C) to[R=\Rd] (ref)
	to[R=\Rc] ++(-2,0) \ncoord(D) -- ++(0,+2) \ncoord(E)
	to[R=\Ra] (A)
	(C) to[R=\Re] ++(+2,0) \ncoord(F) ++(2,0) \ncoord(G) to[R=\Rf,v=$V_o$]
	++(0,2) \ncoord(H)  -- (B) 
	(G) to[V,invert,l=\Kx$V_x$] (F) 
	(D) -- ++(0,-1.5) to[R=\Rg,v>=$V_x$] ++(2,0)  -| (G)
	;	
}
\defQuestionAlias{QAAd}{C.I:1a:Q4}

\defQuestion{C.I:1a:Q2c}{%
	\draw (0,0) \ncoord(ref) to[R=\Rd] ++(0,2) -- ++(0,1) \ncoord(A)
	to[R=\Re] ++(2,0)  \ncoord(C) 
	(ref) -- ++(2,0) to[V,invert,l_=\Kx$V_x$]  ++(2,0) \ncoord(E) to[R=\Rg] ++(2,0)
	\ncoord(F) -- ++(0,2) to[I,invert,l=\Ky$I_y$] ++(-2,0) -- ++(-2,0) to[R=\Rh,v>=$V_o$]
	++(0,-2) \ncoord(D) -- (ref)
	 
	(F) -- ++(0,-2) to[R=\Rf] ++(-2,0) -- ++(-2,0) |- (ref)
	(F)  |- (C) -- (C)
	(ref) to[V,invert,l=\Vi] ++(0,-2) to[R=\Ra,i=$I_y$] ++(-2,0) \ncoord(G)
 	to[R=\Rb,v>=$V_x$] ++(0,2) -- (ref)
	(G) -- ++(-1.5,0) to[R=\Rc] ++(0,2) |- (A) -- (A)
	
	 ;	
}
\defQuestionAlias{QAAbc}{C.I:1a:Q2c}


\defQuestion{C.I:2a:Q1}{%
	\draw (0,0) \ncoord(A) to[V,invert,l=\Vi] ++(0,2) \ncoord(B) -- ++(0,1.5) to[R=\Rc] ++(2,0) \ncoord(C)
	(B) to[R=\Ra] ++(2,0) \ncoord(E) to[C=\Ca,v>=$V_{C_1}$] (E |- A)
	(E) to[R=\Rb] ++(2,0) \ncoord(G) to[open] (G |- A) to[V,invert,l_=\Kx$V_{C_1}$] (G) |- (C)
	(E) -- ++(0,0.75) \ncoord(Fa) to[open] (Fa -| G) to[open] ++(-0.25,0) \ncoord(Fb)
	(Fa) -- (Fb) arc(180:0:0.25) -- ++(2.5,0) \ncoord(I)
	to[C=\Cb,v=$V_{C_2}$] (I |- A)
	(I) -- ++(1.5,0) \ncoord(J) to[R=\Rd] (J |- A) -- (A)
	;	
}
\defQuestionAlias{QABa}{C.I:2a:Q1}

\defQuestion{C.I:2a:Q1b}{%
	\draw (0,0) \ncoord(A) to[V,invert,l=\Vi] ++(0,2) \ncoord(B) -- ++(0,1.5) to[R=\Rc] ++(2,0) \ncoord(C)
	(B) to[R=\Ra] ++(2,0) \ncoord(E) to[C=\Ca,v>=$V_{C_1}$] (E |- A)
	(E) to[R=\Rb] ++(2,0) \ncoord(G) to[open] (G |- A) to[V,invert,l_=\Kx$V_{C_1}$] (G) |- (C)
	(E) -- ++(0,0.75) \ncoord(Fa) to[open] (Fa -| G) to[open] ++(-0.25,0) \ncoord(Fb)
	(Fa) -- (Fb) arc(180:0:0.25) -- ++(.5,0) to[cspst,l=\Ta] ++ (2,0) \ncoord(I)
	to[C=\Cb,v=$V_{C_2}$] (I |- A)
	(I) -- ++(1.5,0) \ncoord(J) to[R=\Rd] (J |- A) -- (A)
	;	
}
\defQuestionAlias{QABab}{C.I:2a:Q1b}

\defQuestion{C.I:2a:Q1a}{%
	\draw (0,0) \ncoord(A) to[V,invert,l=\Vi] ++(0,2) \ncoord(B) -- ++(0,1.5) to[R=\Rc] ++(2,0) \ncoord(C)
	(B) to[R=\Ra] ++(2,0) \ncoord(E) to[L=\La,i>=$I_{L_1}$,v>=$V_{L_1}$] (E |- A)
	(E) to[R=\Rb] ++(2,0) \ncoord(G) to[open] (G |- A) to[V,invert,l_=\Kx$V_{L_1}$] (G) |- (C)
	(E) -- ++(0,0.75) \ncoord(Fa) to[open] (Fa -| G) to[open] ++(-0.25,0) \ncoord(Fb)
	(Fa) -- (Fb) arc(180:0:0.25) -- ++(2.5,0) \ncoord(I)
	to[L=\Lb,i=$I_{L_2}$] (I |- A)
	(I) -- ++(1.5,0) \ncoord(J) to[R=\Rd] (J |- A) -- (A)
	;	
}
\defQuestionAlias{QABaa}{C.I:2a:Q1a}


\defQuestion{C.I:2a:Q2}{%
	\draw (0,0) \ncoord(A) to[R=\Ra] ++(0,2) \ncoord(B) -- ++(0,1.5) \ncoord(C) to[R=\Rb,i=$I_2(t)$] ++(3,0) \ncoord(I)
	(B) to[L=\La,i=$I_{L_1}$] ++(3.5,0) \ncoord(D) to[open] (D |- A) to[V,invert,l=\Vi] (D) to[C=\Ca,v=$V_{C_1}$] ++(2,0) \ncoord(E)
	-- (E |- I) \ncoord(F) -- (I)
	(F) -- (F |- A) 
	(E) to[R=\Rd] ++(2,0) \ncoord(J) to[I,invert,invert,l=\Ii] (J |- A)
	(F) to[R=\Rc] ++(2,0) \ncoord(G) -- (J)
	(G) -- ++(2.5,0) \ncoord(H) to[R=\Re] (H |- A) -- (A)
	 ;	
}
\defQuestionAlias{QABb}{C.I:2a:Q2}




\defQuestion{C.I:2a:Q2a}{%
	\draw (0,0) \ncoord(A) to[R=\Ra] ++(0,2) \ncoord(B) -- ++(0,1.5) \ncoord(C) to[R=\Rb,i=$I_2(t)$] ++(3,0) \ncoord(I)
	(B) to[C=\Cb,v=$V_{C_2}$] ++(3.5,0) \ncoord(D) to[open] (D |- A) to[V,invert,l=\Vi] (D) to[C=\Ca,v=$V_{C_1}$] ++(2,0) \ncoord(E)
	-- (E |- I) \ncoord(F) -- (I)
	(F) -- (F |- A) 
	(E) to[R=\Rd] ++(2,0) \ncoord(J) to[I,invert,l=\Ii] (J |- A)
	(F) to[R=\Rc] ++(2,0) \ncoord(G) -- (J)
	(G) -- ++(2.5,0) \ncoord(H) to[R=\Re] (H |- A) -- (A)
	 ;	
} 
\defQuestionAlias{QABba}{C.I:2a:Q2a}


\defQuestion{C.I:2a:Q2b}{%
	\draw (0,0) \ncoord(A)  ++(0,2) \ncoord(B) to[C,l=\Cb,v=$V_{C_2}$] (A)
	(B) -- ++(0,1.5) \ncoord(C) to[R=\Rb,i=$I_2(t)$] ++(3,0) \ncoord(I)
	(B) to[L=\La,i=$I_{L_1}$] ++(3.5,0) \ncoord(D) to[open] (D |- A) to[V,invert,l=\Vi] (D) to[C=\Ca,v=$V_{C_1}$] ++(2,0) \ncoord(E)
	-- (E |- I) \ncoord(F) -- (I)
	(F) -- (F |- A) 
	(E) to[R=\Rd] ++(2,0) \ncoord(J) to[I,invert,l=\Ii] (J |- A)
	(F) to[R=\Rc] ++(2,0) \ncoord(G) -- (J)
	(G) -- ++(2.5,0) \ncoord(H) to[R=\Re] (H |- A) -- (A)
	 ;	
}
\defQuestionAlias{QABb}{C.I:2a:Q2b}



\defQuestion{C.I:2a:Q3}{%
	\draw (0,0) 
	
	node[Quad compact,anchor=1-, draw](qx){\small$Q_x$}
	(qx.1-) -- ++(-1,0) \ncoord(A)
	(qx.1+) -- ++(-1,0) to[L,l_=\La] (A)
	
	(qx.2-) -- ++(1,0) \ncoord(B)
	(qx.2+) -- ++(1,0) \ncoord(C) to[R,l_=\Rj] (B) 

	(B) -- ++(3,0) \ncoord(Kb)
	(C) -- ++(3,0) \ncoord(Ka) to[I,invert,l_=\Ic] (Kb) 
	(Ka) -- ++(1,0) \ncoord(M) node[ocirc]{}
	(Kb) -- ++(1,0) \ncoord(N) node[ocirc]{}
	(M) to[open,v,l^=$V_o$] (N)
		;	
}
\defQuestionAlias{QABc}{C.I:2a:Q3}



\defQuestion{C.I:2a:Q3a}{%
	\draw (0,0) 
	
	node[Quad compact,anchor=1-, draw](qx){\small$Q_x$}
	(qx.1-) -- ++(-1,0) \ncoord(A)
	(qx.1+) -- ++(-1,0) to[R,l_=\Ra] (A)
	
	(qx.2-) -- ++(1,0) \ncoord(B)
	(qx.2+) -- ++(1,0) \ncoord(C) to[R,l_=\Rj] (B) 

	(B) -- ++(3,0) \ncoord(Kb)
	(C) -- ++(3,0) \ncoord(Ka) to[I,invert,l_=\Ic] (Kb) 
	(Ka) -- ++(1,0) \ncoord(M) node[ocirc]{}
	(Kb) -- ++(1,0) \ncoord(N) node[ocirc]{}
	(M) to[open,v,l^=$V_o$] (N)
		;	
}
\defQuestionAlias{QABca}{C.I:2a:Q3a}

\defQuestion{C.I:ext:Q1}{%
	\draw (0,4) to[V,l=\Vi,i=\Ii] (0,0) \ncoord(org)  (0,4) to[R=\Rj] ++(2,0) \ncoord(A)  to[R=\Ra,i=\Ia] ++(2,0)  \ncoord(B)
	(org) node[ground](norg){} -- ++(2,0) to[R,l_=\Ra,i_=\Ib] ++(2,0) \ncoord(L) -- (B)
	-- ++(1,0) \ncoord(C) to[R=\Rb] ++(0,-2) \ncoord(g2) node[ground]{}
	(C) to[open] ++(2,0) \ncoord(D) to[I,l_=\Ki*\Ia] ++(-2,0)
	(D) to[R=\Rc] ++(0,-2) \ncoord(E) -- (g2)
	(D) to[R=\Rd,i=\Ic] ++(2,0) \ncoord(F) -- ++(1,0) \ncoord(G) to[R=\Re] ++(0,-2) \ncoord(g3) node[ground]{}
	(G) to[open] ++(2,0) \ncoord(H) to[I,l_=\Ki*\Ic] ++(-2,0)
	(H) to[R=\Rf] ++(0,-2) \ncoord(I) -- (g3)
	(H) to[R=\Rg,i=\Ie] ++(2,0) \ncoord(J) to[R=\Rh] ++(0,-2)
	(J) to[open] ++(2,0) \ncoord(K) to[I,l_=\Ki*\Ie] ++(-2,0)
	(K) node(nK){} to[R=\Ri] ++(0,-2) \ncoord(P) node[ground]{} -- (g3)
	
	(L) -- ++(1,0) to[open] ++(2,0) \ncoord(M) to[I,l=\Ki*\Ib] ++(-2,0)
	(M) to[R,l_=\Rc]  ++(0,2)
	(M) to[R,l_=\Rd,i_=\Id] ++(2,0) \ncoord(N) -- (F)
	(N) -- ++(1,0) to[open] ++(2,0) \ncoord(O) to[I,l=\Ki*\Id] ++(-2,0)
	(O) to[R,l_=\Rf] ++(0,2)
	
	(A) -- ++(0,1.5) node(nX){} to[R=\Rk]  (nX -| nK) -- (K)
	(P) -- ++(1.5,0) node[ocirc]{} \ncoord(P1)
	(K) to[short, i<=\Io] ++(1.5,0) node[ocirc]{} to[open,v^=\Vo] (P1)
	 
	;
}
\defQuestionAlias{QACa}{C.I:ext:Q1}

\defQuestion{C.I:ext:Q2}{%
	\draw (0,4) to[V,l=\Vi,i=\Ii] (0,0) \ncoord(org)  (0,4) 
		to[R=\Rj] ++(2,0) \ncoord(A)  
	(org) node[ground](norg){} -- ++(2,0) \ncoord(B)
	(A) -- ++(1,0) to[R=\Ra,i=\Ia] ++(0,-2)  
	(B) -- ++(1,0) to[R,l_=\Ra,i_=\Ib] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C) to[R=\Rb] ++(0,-2) \ncoord(g2) node[ground]{}
	(C) -- ++(1.5,0) \ncoord(D) ++(0,2)  \ncoord(Da) to[I,l_=\Ki*\Ia] ++(0,-2)
	(D) ++(0,-2) \ncoord(Db) to[I,l_=\Ki*\Ib] ++(0,2)
	(Da) -- ++(1,0) to[R=\Rc] ++(0,-2) node[ground]{}
	(Db) -- ++(1,0) to[R=\Rc] ++(0,-2) node[ground]{}
	

	(Da) -- ++(3,0) to[R=\Rd,i=\Ic] ++(0,-2)  
	(Db) -- ++(3,0) to[R,l_=\Rd,i_=\Id] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C1) to[R=\Re] ++(0,-2) \ncoord(g2) node[ground]{}
	(C1) -- ++(1.5,0) \ncoord(D1) ++(0,2)  \ncoord(Da1) to[I,l_=\Ki*\Ic] ++(0,-2)
	(D1) ++(0,-2) \ncoord(Db1) to[I,l_=\Ki*\Id] ++(0,2)
	(Da1) -- ++(1,0) to[R=\Rf] ++(0,-2) node[ground]{}
	(Db1) -- ++(1,0) to[R=\Rf] ++(0,-2) node[ground]{}


	(Da1) -- ++(3,0) to[R=\Rg,i=\Ie] ++(0,-2)  
	%(Db1) -- ++(3,0) to[R,l_=\Rg,i_=\If] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C2) to[R=\Rh] ++(0,-2) \ncoord(g2) node[ground]{}
	(C2) -- ++(1.5,0) \ncoord(D2) ++(0,2)  \ncoord(Da2) to[I,l_=\Ki*\Ie] ++(0,-2)
	%(D2) ++(0,-2) \ncoord(Db2) to[I,l_=\Ki*\If] ++(0,2)
	(Da2) -- ++(1,0) \ncoord(E) node(nE){} to[R=\Ri] ++(0,-2) \ncoord(P) node[ground]{}
	%(Db2) -- ++(1,0) to[R=\Ri] ++(0,-2) node[ground]{}

	(A) -- ++(0,1.5) node(nX){} to[R=\Rk]  (nX -| nE) -- (E)
	(P) -- ++(1.5,0) node[ocirc]{} \ncoord(P1)
	(E) to[short, i<=\Io] ++(1.5,0) node[ocirc]{} to[open,v^=\Vo] (P1)
	;
}
\defQuestionAlias{QACb}{C.I:ext:Q2}



\defQuestion{C.I:ext:Q3}{%
	\draw 
%	(0,4) to[V,l=\Vi,i=\Ii] (0,0) \ncoord(org)  (0,4) 
%		to[R=\Rj] ++(2,0) \ncoord(A)  
%	(org) node[ground](norg){} -- ++(2,0) \ncoord(B)
	(2,4) \ncoord(A)
	(2,0) \ncoord(B)
	
	
	(A) -- ++(0,0) node[Quad,anchor=1+,half base width=12.7cm,half base height=3.5cm,I1=$I_{A_1}$,V1=$V_{A_1}$,I2=$I_{A_2}$,V2=$V_{A_2}$](qa){\small$Q_A$}
	
	(qa.north) node[Quad,anchor=south,half base width=12.7cm,I1=$I_{B_1}$,V1=$V_{B_1}$,I2=$I_{B_2}$,V2=$V_{B_2}$](qb){\small$Q_B$}
	
	(qa.inner 1+) -- ++(0.5,0) to[R=\Ra,i=\Ia] ++(0,-2)  
	(B -| qa.inner 1+) -- ++(0.5,0) to[R,l_=\Ra,i_=\Ib] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C) 
	(B -| qa.inner 1+) -- (qa.inner 1-)
	(qa.1-) -- ++(-0.5,0) node[ground]{}
	(qa.2-) -- ++(0.5,0) node[ground]{}
	
	(C) -- ++(1.5,0) to[R=\Rb] ++(0,-2) 
	(C) node[Quad,anchor=1+,half base width=1cm,I1=$I_{x_1}$,V1=$V_{x_1}$,I2=$I_{x_2}$,V2=$V_{x_2}$](qx){\small$Q_x$}
	(qx.1+) -- (qx.2+)
	(qx.1-) -- ++(-0.2,0) node[ground]{}
	(qx.2-) -- ++(0.2,0) node[ground]{}
	%base height=1cm,
	(qx.2+) -- ++(1,0) \ncoord(D)
	
	(D) ++(0,2)  \ncoord(Da) to[I,l_=\Ki*\Ia] ++(0,-2)
	(D) ++(0,-2) \ncoord(Db) to[I,l_=\Ki*\Ib] ++(0,2)
	(Da) -- ++(1,0) to[R=\Rc] ++(0,-2) node[ground]{}
	(Db) -- ++(1,0) to[R=\Rc] ++(0,-2) node[ground]{}
	

	(Da) -- ++(3,0) to[R=\Rd,i=\Ic] ++(0,-2)  
	(Db) -- ++(3,0) to[R,l_=\Rd,i_=\Id] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C1) 
	
	%to[R=\Re] ++(0,-2) \ncoord(g2) node[ground]{}
	(C1) -- ++(1.5,0) to[R=\Re] ++(0,-2) 
	(C1) node[Quad,anchor=1+,half base width=1cm,I1=$I_{y_1}$,V1=$V_{y_1}$,I2=$I_{y_2}$,V2=$V_{y_2}$](qy){\small$Q_y$}
	(qy.1+) -- (qy.2+)
	(qy.1-) -- ++(-0.2,0) node[ground]{}
	(qy.2-) -- ++(0.2,0) node[ground]{}
	%base height=1cm,
	(qy.2+) -- ++(1,0) \ncoord(D1)
	
	
	(D1) ++(0,2)  \ncoord(Da1) to[I,l_=\Ki*\Ic] ++(0,-2)
	(D1) ++(0,-2) \ncoord(Db1) to[I,l_=\Ki*\Id] ++(0,2)
	(Da1) -- ++(1,0) to[R=\Rf] ++(0,-2) node[ground]{}
	(Db1) -- ++(1,0) to[R=\Rf] ++(0,-2) node[ground]{}


	(Da1) -- ++(3,0) to[R=\Rg,i=\Ie] ++(0,-2)  
	%(Db1) -- ++(3,0) to[R,l_=\Rg,i_=\If] ++(0,2)  
	 -- ++(1.5,0)  \ncoord(C2) 
	
	%to[R=\Rh] ++(0,-2) \ncoord(g2) node[ground]{}
	(C2) -- ++(1.5,0) to[R=\Rh] ++(0,-2) 
	(C2) node[Quad,anchor=1+,half base width=1cm,I1=$I_{z_1}$,V1=$V_{z_1}$,I2=$I_{z_2}$,V2=$V_{z_2}$](qz){\small$Q_z$}
	(qz.1+) -- (qz.2+)
	(qz.1-) -- ++(-0.2,0) node[ground]{}
	(qz.2-) -- ++(0.2,0) node[ground]{}
	%base height=1cm,
	(qz.2+) -- ++(1,0) \ncoord(D2)
	
	
	(D2) ++(0,2)  \ncoord(Da2) to[I,l_=\Ki*\Ie] ++(0,-2)
	%(D2) ++(0,-2) \ncoord(Db2) to[I,l_=\Ki*\If] ++(0,2)
	(Da2) -- ++(1,0) \ncoord(E) node(nE){} to[R=\Ri] ++(0,-2) \ncoord(P) node[ground]{}
	(Da2) -- (qa.inner 2+)
	%(Db2) -- ++(1,0) to[R=\Ri] ++(0,-2) node[ground]{}

%to be re-instated
	%(A) -- ++(0,1.5) node(nX){} to[R=\Rk]  (nX -| nE) -- (E)
	%(P) -- ++(1.5,0) node[ocirc]{} \ncoord(P1)
	%(E) to[short, i<=\Io] ++(1.5,0) node[ocirc]{} to[open,v^=\Vo] (P1)

	;
	
%	\QuadParConnectORG*{qa}{qb}{1}
%	\QuadParConnectORG*{qa}{qb}{2}

	\QuadParConnect[left,up]{qb}{qa}
	\QuadParConnect[right,up]{qb}{qa}


	\draw (qb.1+) to[R,l_=\Rj]  ++(-2,0) to[V,l=\Vi,i=\Ii] ++(0,-2) node[ground]{} -- ++(1.5,0)%(qb.1-)
	(qb.inner 1+) to[R,l_=\Rk] (qb.inner 2+)
	(qb.2-) ++(0.5,0) -- ++(1,0) node[ocirc]{} \ncoord(P1) node(nP1){}
	(qb.2+) to[short, i>=\Io] (qb.2+ -| nP1) node[ocirc]{} to[open,v^=\Vo] (P1);
	
}
\defQuestionAlias{QACc}{C.I:ext:Q3}



\endinput
